<html>
  <head>
    <title>Mail Art // One</title>
    <!-- fb and jq -->
    <script
    src="https://code.jquery.com/jquery-2.2.4.min.js"
    integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
    crossorigin="anonymous">
    </script>
    <script
    src="https://www.gstatic.com/firebasejs/3.6.8/firebase.js">
    </script>
    <!-- modals -->
    <script src="../static/vex.combined.min.js"></script>
    <script>vex.defaultOptions.className = 'vex-theme-wireframe';</script>
    <link rel="stylesheet" href="../static/vex.css" />
    <link rel="stylesheet" href="../static/vex-theme-wireframe.css" />
    <!-- personal styles -->
    <link rel="stylesheet" href="../static/style.css">
    <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">

  </head>
  <body>

    <div class="main">
    <div class="playlist-container">
      <div class="playlist" id="js-playlist">
        <button id="js-add-song">Add Song</button>
      </div>
    </div>

    <div class="cover-container js-cover-container">
    </div>


    <div class="modal" id="modal">
      <div class="modal-content">
        <p>Search for a song<span id="close" style="float: right">X</span></p>
        <input type="text" id="js-search-song" data-id="1">
        <div id="js-results"></div>
      </div>
    </div>


    </div>

    <script src="../static/spotify.js"></script>
    <script src="../static/firebase.js"></script>
    <script src="../static/app.js"></script>

    <script>

    $(".js-cover-container").css("background-image","url('../static/art01.png')");


    /**
    * SEARCH SONG / SPOTIFY FUNCTIONS ~---
    */

    $("#js-search-song").keyup(function(){
      var query = $(this).val();
      searchSongs(query);
    });

    $(document).on('click','#js-song-link',function(){
      var id = $(this).data(id).id;

      var song   = songarray[id].song;
      var artist = songarray[id].artist;
      var url    = songarray[id].url;

      writeSongData(1,song,artist,url);

      $('#modal').css('display', 'none');

    });


    var songRef = firebase.database().ref('albums/1');
    songRef.on('child_added', function(data) {
      var song = data.val().song;
      var artist = data.val().artist;
      var url = data.val().url;
      addtoPlaylist(song,artist,url);
    });

    function addtoPlaylist(song,artist,url){
      $('#js-playlist').append('<p id="js-play-song" class="blurry-text" data-url='+url+'>'+song+' by ' +artist+'</p>');
    }


    </script>
  </body>
</html>
